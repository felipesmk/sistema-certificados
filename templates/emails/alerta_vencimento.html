{% extends "emails/base_email.html" %}

{% block content %}
<div class="alert alert-warning">
    <strong>ALERTA DE VENCIMENTO</strong><br>
    O item abaixo está próximo do vencimento e requer atenção imediata.
</div>

<div class="card">
    <div class="card-title">DETALHES DO ITEM</div>
    <table class="table">
        <tr>
            <th>Nome/Descrição:</th>
            <td>{{ registro.nome }}</td>
        </tr>
        <tr>
            <th>Tipo:</th>
            <td>{{ registro.tipo }}</td>
        </tr>
        <tr>
            <th>Data de Vencimento:</th>
            <td>
                <span class="badge badge-danger">
                    {{ registro.data_vencimento.strftime('%d/%m/%Y') }}
                </span>
            </td>
        </tr>
        <tr>
            <th>Dias Restantes:</th>
            <td>
                <span class="badge badge-warning">
                    {{ dias_restantes }} dias
                </span>
            </td>
        </tr>
        <tr>
            <th>Responsáveis:</th>
            <td>
                {% if registro.responsaveis %}
                    {% for responsavel in registro.responsaveis %}
                        {{ responsavel.nome }}{% if not loop.last %}, {% endif %}
                    {% endfor %}
                {% else %}
                    <span style="color: #6c757d;">Não definido</span>
                {% endif %}
            </td>
        </tr>
        <tr>
            <th>Status:</th>
            <td>
                {% if registro.regularizado %}
                    <span class="badge badge-success">Regularizado</span>
                {% else %}
                    <span class="badge badge-danger">Pendente</span>
                {% endif %}
            </td>
        </tr>
    </table>
</div>

<div class="card">
    <div class="card-title">AÇÕES NECESSÁRIAS</div>
    
    {% if registro.tipo.lower() in ['certificado', 'certificados'] %}
        <ul style="margin-left: 20px; margin-bottom: 15px;">
            <li>Verificar se o certificado ainda é necessário para os serviços</li>
            <li>Iniciar processo de renovação junto ao fornecedor</li>
            <li>Atualizar informações no sistema após renovação</li>
            <li>Marcar como regularizado após conclusão</li>
        </ul>
        <p style="margin-bottom: 15px;">
            <strong>Importante:</strong> Certificados vencidos podem causar interrupções nos serviços e comprometer a segurança da infraestrutura.
        </p>
    {% elif registro.tipo.lower() in ['senha', 'senhas'] %}
        <ul style="margin-left: 20px; margin-bottom: 15px;">
            <li>Verificar se a senha ainda é necessária para o serviço</li>
            <li>Iniciar processo de alteração de senha</li>
            <li>Atualizar a senha no sistema após alteração</li>
            <li>Marcar como regularizado após conclusão</li>
        </ul>
        <p style="margin-bottom: 15px;">
            <strong>Importante:</strong> Senhas vencidas podem comprometer o acesso aos sistemas e representar risco de segurança.
        </p>
    {% elif registro.tipo.lower() in ['licença', 'licenças', 'licenca', 'licencas'] %}
        <ul style="margin-left: 20px; margin-bottom: 15px;">
            <li>Verificar se a licença ainda é necessária para o software</li>
            <li>Iniciar processo de renovação junto ao fornecedor</li>
            <li>Atualizar informações da licença no sistema</li>
            <li>Marcar como regularizado após conclusão</li>
        </ul>
        <p style="margin-bottom: 15px;">
            <strong>Importante:</strong> Licenças vencidas podem resultar em interrupção do uso de software e possíveis penalidades.
        </p>
    {% else %}
        <ul style="margin-left: 20px; margin-bottom: 15px;">
            <li>Verificar se o item ainda é necessário</li>
            <li>Iniciar processo de renovação ou atualização</li>
            <li>Atualizar informações no sistema após conclusão</li>
            <li>Marcar como regularizado após finalização</li>
        </ul>
        <p style="margin-bottom: 15px;">
            <strong>Importante:</strong> Itens vencidos podem causar interrupções operacionais e comprometer a continuidade dos serviços.
        </p>
    {% endif %}
</div>

<div class="alert alert-info" style="margin-top: 20px;">
    <strong>RECOMENDAÇÃO:</strong> Configure alertas automáticos no sistema para receber notificações 
    com antecedência e evitar vencimentos inesperados.
</div>
{% endblock %} 